Basic SQL Commands

The SQL SHOW statement displays information contained in the database and its tables. This helpful tool lets you keep track of your database contents and remind yourself about the structure of your tables. 

For example, the "SHOW DATABASES" command lists the databases managed by the server. The easiest way to get MySQL and PHPMyAdmin is to install free tools like XAMPP or WAMP, which include all necessary installers.

The "SHOW TABLES" command is used to display all of the tables in the currently selected MySQL database. 

"SHOW COLUMNS" displays information about the columns in a given table. The following example displays all columns in our customers table:

"SHOW COLUMNS FROM customers"

"SHOW COLUMNS" displays the following values for each table column:

Field: column name
Type: column data type
Key: indicates whether the column is indexed 
Default: default value assigned to the column
Extra: may contain any additional information that is available about a given column 

================================================================

SELECT Statement

The "SELECT" statement is used to select data from a database. The result is stored in a result table, which is called the result-set. 

A query may retrieve information from selected columns or from all columns in the table. To create a simple SELECT statement, specify the name(s) of the column(s) you need from the table. 

Syntax of the SQL SELECT statement:

SELECT column_list FROM table_name 

- column_list includes one or more columns from which data is retrieved 
- table-name is the name of the table from which the information is retrieved 

A SELECT statement retrieves zero or more rows from one or more database tables.

=======

Multiple Queries 

SQL allows to run multiple queries or commands at the time. The following SQL statement selects the FirstName and City columns from the customers table:

SELECT FirstName FROM customers;
SELECT City FROM customers;

Remember to end each SQL statement with a semicolon to indicate that the statement is complete and ready to be interpreted. 

*SQL is case insensitive.. "select" , "SELECT" , and "sElEct" ..tho it is common practice to write all SQL commands in upper-case. 

=====================================

Syntax Rules 

A single SQL statement can be  placed on one or more text lines. In addition, multiple SQL statements can be combined on a single line. White spaces and multiple lines are ignored in SQL. For example, the following query is absolutely corrects:

SELECT         City

FROM customers;

However, it is recommended to avoid unnecessary white spaces and lines. Combined with proper spacing and indenting, breaking up the commands into logical lines will make your SQL statements much easier to read and maintain. 

================================================================

Selecting Multiple Columns 

As previously mentioned, the SQL SELECT statement retrieves records from tables in your SQL database. You can select multiple table columns at once. Just list the column names, separated by commas

SELECT FirstName, LastName, City FROM customers;

===============================================================

Selecting All Columns

To retrieve all of the information contained in your table, place an asterisk(*) sign after the SELECT command, rather than typing in each column names separately. In SQL, the asterisk means all. For example:

SELECT * FROM customers;

================================================================

The DISTINCT Keyword 

In situations in which you have multiple duplicate records in a table, it might make more sense to return only unique records, instead of fetching the duplicates. 

The SQL "DISTINCT" keyword is used in conjunction with "SELECT" to eliminate all duplicate records and return only unique ones. 

The basic syntax of DISTINCT is as follows:

SELECT DISTINCT column_name1, column_name2 FROM table_name;

================================================================

The LIMIT Keyword

By default, all results that satisfy the conditions specified in the SQL statement are returned. However, sometimes we need to retrieve just a subset of records. In MySQL, this is accomplished by using the LIMIT keyword. 

The syntax for LIMIT is as follows:

SELECT ID, FirstName, LastName, City FROM customers LIMIT 5; 

..this will retrieve the first five (or whatever number indicated) records from the customers table.

You can also pick up a set of records from a particular offset. In the following example, we pick up four records, starting from the third position:

SELECT ID, FirstName, LastName, City FROM customers OFFSET 3 LIMIT 4;

..retrieves records indexed: 4, 5, 6, 7

The reason that it produces results starting from ID number four, and not three, is that MySQL starts counting from zero, meaning that the offset of the first row is 0, not1.

===============

Fully Qualified Names

In SQL, you can provide the table name prior to the column name, by separating them with a dot(.). 

Ie:

SELECT City FROM customers;
SELECT customers.City FROM customers;

The term for this syntax is called the "fully qualified name" of that column. This form of writing is especially useful when working with multiple tables that may share the same column names.

=============

ORDER BY is used with SELECT to sort the returned data. The following example sorts our customers table by the FirstName column:

SELECT * FROM customers ORDER BY FirstName;

..by default, the ORDER BY keyword sorts the results in ascending order.

===============

Sorting Multiple Columns

ORDER BY can sort retrieved data by multiple columns. When using ORDER BY with more than one column, separate the list of columns to follow ORDER BY with commas. To order our customers table by LastName and Age:

SELECT * FROM customers ORDER BY LastName, Age;

The ORDER BY command starts ordering in the same sequence as the columns. It will order by the first column listed, then by the second, and so on.

=================================================================================
Filtering, Functions, Subqueries
=================================================================================

The WHERE Statement

The WHERE clause can be used to extract only those records that fulfill a specified criterion (ie: indexed at).

The syntax for the WHERE clause is as follows:

SELECT column_list FROM table_name WHERE condition;
-or-
SELECT * FROM customers WHERE ID = 7;

===============================
SQL Operators

Comparison operators and Logical operators are used in the WHERE clause to filter the data to be selected.

The following comparison operators can be used with regard to the WHERE clause:

=, !=, >, <, >=, <=, BETWEEN

FOR EXAMPLE- we can display all customers names listed in our table, with the exception of the one with ID 5.

SELECT * FROM customers WHERE ID != 5; // ..all records except the one with ID 5 will print. 

===============================
The BETWEEN Operator selects values within a range. The first value must be lower bound and the second value, the upper bound. 

The syntax for the BETWEEN clause is:

SELECT column_name(s) FROM table_name WHERE column_name BETWEEN value1 AND value2;

The following SQL statement selects all records with IDs that fall between 3 and 7:

SELECT * FROM customers WHERE ID BETWEEN 3 AND 7; 

========================
Text Values 
========================

When working with text columns, surround any text that appears in the statement with single quotation marks('). The following SQL statement selects all records in which the CITY is equal to New York:

SELECT ID, FirstName, LastName, City FROM customers WHERE City = 'New York';

-If your text contains an apostrophe (single quote), you should use two single quote characters to escape the apostrophe. For example: 'Can''t'.

=====================
Logical Operated
=====================

Logical operators can be used to combine two Boolean values and return a result of true, false, or null. The following operators can be used:

AND - TRUE is both expressions are TRUE 
OR - TRUE if either expression is TRUE
IN - TRUE if the operand is equal to one of a list of expressions
NOT - Returns TRUE if expression is not TRUE

When retrieving data using a SELECT statement, use logical operators in the WHERE clause to combine multiple conditions. If you want to select rows that satisfy all of the given conditions, use the logical operator, AND. To find the names of all customers between 30 and 40 years of age, set up the query as seen here:

SELECT ID, FirstName, LastName, Age FROM customers WHERE Age >= 30 AND Age <= 40;

- You can combine as many conditions as needed to return the desired results.

To find the names of all customers  who live either in New York or Chicago, the query would look like this:

SELECT * FROM customers WHERE City = 'New York' OR City = 'Chicago';

- You can OR two or more conditions.

================================================================

AND and OR may be COMBINED to test multiple conditions in a query. These two operators are called conjunctive operators. 

When combining these conditions, it is important to use parenthesis, so that the order to evaluate each condition is known.The statement below selects all customers from the city "New York" AND with the age equal to "30" OR â€œ35":

SELECT * FROM customers WHERE City = 'New York' AND (Age=30 OR Age=35);

========================

The IN Operator is used when you want to compare a column with more than one value. For example, you might need to select all customers from New York, Los Angeles, and Chicago. With the OR condition, your SQL would look like this: 

SELECT * FROM customers WHERE City = 'New York' OR City = 'Los Angeles' OR City = 'Chicago';

- The IN operator is used when you want to compare a column with more than one value. You can achieve the same result with a single IN condition, instead of the multiple OR conditions. Note the use of parentheses in the syntax:

SELECT * FROM customers WHERE City IN ('New York', 'Los Angeles', 'Chicago');

- The NOT IN operator allows you to exclude a list of specific values from the result set. If we add the NOT keyword before IN in our previous query, customers living in those cities will be excluded:

SELECT * FROM customers WHERE City NOT IN ('New York', 'Los Angeles', 'Chicago');

====================================

The CONCAT Function

The CONCAT function is used to concatenate two or more text values and returns the concatenating string. The CONCAT() function takes two or more parameters.

SELECT CONCAT(FirstName, ', ' , City) FROM customers;

==========

The AS Keyword 

A concatenation results in a new column. The default column name will be hte CONCAT function. You can assign a custom name to the resulting column using the AS keyword:

SELECT CONCAT(FirstName, ', ' , City) AS new_column FROM customers;

And when you run the query, the column name appears to be changed. 

===============

Arithmetic Operators

Arithmetic operators perform arithmetical operations on numeric operands. The Arithmetic operators include addition (+), subtraction (-), multiplication (*), division (/). 

The following employees table shows employee names and salaries:

The example below adds 500 to each employee's salary and selects the result:

SELECT ID, FirstName, LastName, Salary+500 AS Salary FROM employees;

- Parentheses can be used to force an operation to take priority over any other operators. They are also used to improve code readability.

===========
Q: The salary listed in your table is monthly.
Each employee receives a bonus once a year. The bonus for each employee is equal to their years of experience multiplied by 500.

Write a query to output the firstname and lastname columns into one column named fullname separated by space, and the total annual salary for each employee keeping in mind bonuses named 'total'. Sort by the 'total' column.

A: SELECT CONCAT(firstname, ' ',lastname) AS fullname, salary*12+experience*500 AS total FROM staff ORDER BY total;

=============

The UPPER Function

The UPPER function converts all letters in the specified string to uppercase. The LOWER function converts the string to lowercase. If the characters in the string are not letters, this function will have no effect on them.

The following SQL query selects all LastNames as uppercase:

SELECT FirstName, UPPER(LastName) AS LastName FROM employees;

======
SQRT and AVG 

The SQRT function returns the square root of given value in the argument:

SELECT Salary, SQRT(Salary) FROM employees;

- Similarly, the AVG function returns the average value of a numeric column:

SELECT AVG(Salary) FROM employees;

- Another way to do the SQRT is to use POWER with the 1/2 exponent. However, SQRT seems to work faster than POWER in this case.

==============

The SUM function is used to calculate the sum for a column's values. For example, to get the sum of all of the salaries in the employees table, our SQL query would look like this:

SELECT SUM(Salary) FROM employees;

============

Subqueries - A subquery is a query within another query. Let's consider an example. We might need the list of all employees whose salaries are greater than the average. 

-First, calculate the average:

SELECT AVG(Salary) FROM employees;

As we already know the average, we can use a simple WHERE to list the salaries that are greater than that number (3100). 

SELECT FirstName, Salary FROM employees
WHERE Salary > 3100
ORDER BY Salary DESC;

- The DESC keyword sorts results in descending order. Similarly, ASC sorts the results in ascending order.

A single SUBQUERY will return the same result more easily. Enclose the subquery in parentheses.
Also, note that there is no semicolon at the end of the subquery, as it is part of our single query.

SELECT FirstName, Salary FROM employees
WHERE Salary > (SELECT AVG(Salary) FROM employees)
ORDER BY Salary DESC;

====================

The Like Operator 

The LIKE keyword is useful when specifying a search condition within your WHERE clause.

SELECT column_name(s)
FROM table_name 
WHERE column_name LIKE pattern;

SQL "pattern" matching enables you to use "_" to match any single character and "%" to match an arbitrary number of characters (including zero characters).

For example, to select employees whose FirstNames begin with the letter A, you would use the following query:

SELECT * FROM employees
WHERE FirstName LIKE 'A%';

- As another example, the following SQL query selects all employees with a LastName ending with the letter "s". The % wildcard can be used multiple times within the same pattern:

SELECT * FROM employees WHERE LastName LIKE '%s';

SELECT * FROM desserts WHERE name LIKE '%Chocolate%'; // Prints desserts with Chocolate anywhere in the field. 

============================

The MIN Function is used to return the minimum value of an expression in a SELECT statement. For example, you might wish to know the minimum salary among the employees. ALL of the SQL functions can be combined together to create a single expression.

SELECT MIN(Salary) AS Salary FROM employees;

============================

Write a query to output the apartments whose prices are greater than the average and are also not rented, sorted by the 'Price' column:

SELECT * FROM Apartments
WHERE  price >= (SELECT AVG(price) FROM Apartments ) 
ORDER BY price;

==============================================

Joining Tables

All of the queries shown up until now have selected from just one table at a time. One of the most beneficial features of SQL is the ability to combine data from two or more tables. In SQL, "joining tables" means combing data from two or more tables. A table join creates a temporary table showing the data from the joined tables.

Rather than storing the customer name in both tables, perhaps one table (orders) contains a reference to the customer ID that appears in the customers table. This approach is more efficient, as opposed to storing the same text values in both tables. In order to be able to select the corresponding data from both tables, we will need to join them on that condition.

To join the two tables, specify them as a comma-separated list in FROM clause. Each table contains "ID" and "Name" columns, so in order to select the correct ID and Name, fully qualified names are used:

SELECT customers.ID, customers.Name, orders.Name, orders.Amount FROM customers, orders WHERE customers.ID=orders.Customer_ID ORDER BY customers.ID;

- Note that the WHERE clause "joins" the tables on the condition that the ID from the customers table should be equal to the customer_ID of the orders table. The returned data will show customer orders and their corresponding amount. As elsewhere, specify multiple table names in the FROM by comma-separating them. 

==========

Custom Names - can be used for tables as well. You can shorten the join statements by giving the tables "nicknames":

SELECT ct.ID, ct.Name, ord.Name, ord.Amount FROM customers AS ct, orders AS ord WHERE ct.ID=ord.Customer_ID ORDER BY ct.ID;

As you can see, we shortened the table names as we used them in our query.


================

TYPES OF JOIN

The following are the types of JOIN that can be used in MySQL:

-INNER JOIN 

INNER JOIN is equivalent to JOIN. It returns rows when there is a match between the tables. Note the ON keyword for specifying the inner join condition:

SELECT column_name(s) FROM table1 INNER JOIN table2 ON table1.column_name=table2.column_name;

- only the records matching the join condition are returned.

-LEFT JOIN 

The LEFT JOIN returns all rows from the left table, even if there are no matches in the right table. This means that if there are no matches for the ON clause in the table on the right, the join will still return the rows from the first table in the result. The outer keyword is optional, and can be omitted:

SELECT table1.column1, table2.column2... FROM table1 LEFT OUTER JOIN table2 ON table1.column_name = table2.column_name;

The following SQL statement will return all customers, and the items they might have. The result set contains all the rows from the left table and matching data from the right table. If no match is found for a particular row, NULL is returned:

SELECT customers.Name, items.Name FROM customers LEFT OUTER JOIN items ON customers.ID=items.Seller_id;

-RIGHT JOIN 

The RIGHT JOIN returns all rows from the right table, even if there are no matches in the left table:

SELECT table1.column1, table2.column2... FROM table1 RIGHT OUTER JOIN table2 ON table1.column_name = table2.column_name;

The RIGHT JOIN returns all the rows from the right table (items), even if there are no matches in the left table (customers). As before, the OUTER keyword is optional, and can be omitted. There are other types of joins in the SQL language, but they are not supported by MySQL.

===============================

Set Operation

Occasionally, you might need to combine data from multiple tables into one comprehensive dataset. This may be for tables with similar data within the same database or maybe there is a need to combine similar data across databases or even across servers. 

To accomplish this, use the UNION and UNION ALL operators.

UNION combines multiple datasets into a single dataset, and removes any existing duplicates.
UNION ALL combines multiple datasets into one dataset, but does not remove duplicate rows. UNION ALL is faster than UNION, as it does not perform the duplicate removal operation over the data set.

The UNION operator is used to combine the result-sets of two or more SELECT statements. ALL SELECT statements within the UNION must have the same number of columns. The columns must also have the same data types. Also, the columns in each SELECT statement must be in the same order:

SELECT column_name(s) FROM table1 UNION SELECT column_name(s) FROM table2;

SELECT ID, FirstName, LastName, City FROM First
UNION
SELECT ID, FirstName, LastName, City FROM Second;

Tip- If your columns don't match exactly across all queries, you can use a NULL (or any other) value such as:

SELECT FirstName, LastName, Company FROM businessContacts
UNION
SELECT FirstName, LastName, NULL FROM otherContacts;

The UNION operator is used to combine the result-sets of two or more SELECT statements.

UNION ALL selects all rows from each table and combines them into a single table. The following SQL statement uses UNION ALL to select data from the First and Second tables:

SELECT ID, FirstName, LastName, City FROM First UNION ALL
SELECT ID, FirstName, LastName, City FROM Second;

=====================================

Inserting Data

SQL tables store data in rows, one row after another. The INSERT INTO statement is used to add new rows of data to a table in the database. The SQL INSERT INTO syntax is as follows:

INSERT INTO table_name VALUES (value1, value2, value3,...)

-Make sure the order of the values is in the same order as the columns in the table. 

When inserting records into a table using the SQL INSERT statement, you must provide a value for every column that does not have a default value, or does not support NULL.

The values are comma-separated and their order corresponds to the columns in the table:

INSERT INTO Employees VALUES (8,'Anthony','Young',35);

==========

Inserting Data - alternatively, you can specify the table's column names in the INSERT INTO statement:

INSERT INTO table_name (column1, column2, column3,...,columnN);

INSERT INTO Employees (ID, FirstName, LastName, Age) VALUE (8,'Anthony','Young',35);

-You can specify your own column order, as long as the values are specified in the same order as the columns.

It's also possible to inset data into specific columns only.

INSERT INTO Employees (ID, FirstName, LastName) VALUES (9, 'Samuel','Clark');

The Age column for that row automatically became 0, as that is its default value. 

========

Updating Data - The UPDATE statement allows us to alter data in the table. The basic syntax of an UPDATE query with a WHERE clause is as follows:

UPDATE table_name SET column1=value1, column2=value2,... WHERE condition;

- You specify the column and its new value in a comma-separated list after the SET keyword. If you omit the WHERE clause, all records in the table will updated!

UPDATE Employees SET Salary=5000 WHERE ID=1;

Updating Multiple Columns - It is also possible to UPDATE multiple columns at the same time by comma separating them:

UPDATE Employees SET Salary=5000, FirstName='Robert' WHERE ID=1;

You can specify the column order any way you like in the SET clause.

================

Deleting Data - The DELETE statement is used to remove data from your table. DELETE queries work much like UPDATE queries.

DELETE FROM table_name WHERE condition;

For example, you can delete a specific employee from the table:

DELETE FROM Employees WHERE ID=1;

*****NOTE*******If you omit the WHERE clause, all records in the table will be deleted! The DELETE statement removes the data from the table PERMANENTLY!

=================

SQL Tables - A single database can house hundreds of tables, each playing its own unique role in the database schema. 

SQL tables are comprised of table rows and columns. Table columns are responsible for storing many different types of data, including numbers, texts, dates, and even files. 

The CREATE TABLE statement is used to create a new table. Creating a basic table involves naming the table and defining its columns and each column's data type.

Creating a Table - The basic sytax is as follows:

CREATE TABLE table_name (
    column_name1 data_type(size),
    column_name2 data_type(size),
    column_name3 data_type(size),
    .....
    columnN data_type(size)
);


- The column_names specify the names of the columns we want to create.
- The data_type parameter specifies what type of data the column can hold. For example, use int for whole numbers.
- The size parameter specifies the maximum length of the table's column. 

Assume that you want to create a table called "Users" that consists of four columns: UserID, LastName, FirstName, and City. Use the following CREATE TABLE statement:

CREATE TABLE Users
(
   UserID int,
   FirstName varchar(100), 
   LastName varchar(100),
   City varchar(100)
); 

- varchar: is a datatype that stores characters. You specify the number of characters in the parentheses after the type. So in the example above, our fields can hold max 100 characters long text.


Data Types - Choosing the correct data type for your columns is the key to good database design:


Data types specify the type of data for a particular column.

If a column called "LastName" is going to hold names, then that particular column should have a "varchar" (variable-length character) data type.
The most common data types:
Numeric
INT -A normal-sized integer that can be signed or unsigned.
FLOAT(M,D) - A floating-point number that cannot be unsigned. You can optionally define the display length (M) and the number of decimals (D).
DOUBLE(M,D) - A double precision floating-point number that cannot be unsigned. You can optionally define the display length (M) and the number of decimals (D).

Date and Time
DATE - A date in YYYY-MM-DD format.
DATETIME - A date and time combination in YYYY-MM-DD HH:MM:SS format.
TIMESTAMP - A timestamp, calculated from midnight, January 1, 1970
TIME - Stores the time in HH:MM:SS format.

String Type
CHAR(M) - Fixed-length character string. Size is specified in parenthesis. Max 255 bytes.
VARCHAR(M) - Variable-length character string. Max size is specified in parenthesis.
BLOB - "Binary Large Objects" and are used to store large amounts of binary data, such as images or other types of files.
TEXT - Large amount of text data.

=================

Primary Key: The UserID is the best choice for our Users table's primary key. Define it as a primary key during table creation, using the PRIMARY KEY keyword. Specify the column name in the parentheses of the PRIMARY KEY keyword:

CREATE TABLE Users
(
   UserID int,
   FirstName varchar(100),
   LastName varchar(100),
   City varchar(100),
   PRIMARY KEY(UserID)
); 

===========

SQL Constraints - are used to specify rules for table data.

The following are commonly used SQL constraints:

NOT NULL - Indicates that a column cannot contain any NULL value.
UNIQUE - Does not allow to insert a duplicate value in a column. The UNIQUE constraint maintains the uniqueness of a column in a table. More than one UNIQUE column can be used in a table. 
PRIMARY KEY - Enforces the table to accept unique data for a specific column and this constraint create a unique index for accessing the table faster.
CHECK - Determines whether the value is valid or not from a logical expression.
DEFAULT - While inserting data into a table, if no value is supplied to a column, then the column gets the value set as DEFAULT. 

For example, the following means that the name column disallows NULL values:

name varchar(100) NOT NULL

During table creation, specify column level constraint(s) after the data type of that column.

====================

AUTO_INCREMENT - allows a unique number to be generated when a new record is inserted into a table. Often, we would like the value of the primary key field to be created automatically every time a new record is inserted.

By default, the starting value for AUTO_INCREMENT is 1, and it will increment by 1 for each new record. Let's set the UserID field to be a primary key that automatically generates a new value:

UserID int NOT NULL AUTO_INCREMENT, PRIMARY KEY (UserID)

Auto-increment allows a unique number to be generated when a new record is inserted into a table. 

============

Using Constraints

The example below demonstrates how to create a table using constraints.

CREATE TABLE Users (
id int NOT NULL AUTO_INCREMENT,
username varchar(40) NOT NULL, 
password varchar(10) NOT NULL,
PRIMARY KEY(id)
);

The following SQL enforces that the "id", "username", and "password" columns do not accept NULL values. We also define the "id" column to be an auto-increment primary key field. When inserting a new record into the Users table, it's not necessary to specify a value for the id column; a unique new value will be added automatically.

================================================================

ALTER TABLE - The ALTER TABLE command is used to add, delete, or modify columns in an existing table. You would also use the ALTER TABLE command to add and drop various constraints on an existing table. The following syntax adds a new column named DateOfBirth to a table called People:

ALTER TABLE People ADD DateOfBirth date;

-All rows will have the default value in the newly added column, which, in this case, is NULL.

The code below demonstrates how to delete the column named DateOfBirth in the People table:

ALTER TABLE People DROP COLUMN DateOfBirth;

-The column, along with all of its data, will be completely removed from the table.

To delete the entire table, use the DROP TABLE command:

DROP TABLE People;

Be careful when dropping a table. Deleting a table will result in the complete loss of the information stored in the table!

The ALTER TABLE command is also used to rename columns:

ALTER TABLE People RENAME FirstName TO name;

This query will rename the column called FirstName to name. Below will rename the entire table:

RENAME TABLE People TO Users; // This will rename the table People to Users.

===============================

VIEWS - In SQL, a VIEW is a virtual table that is based on the result-set of an SQL statement. A view contains rows and columns, just like a real table. The fields in a view a fields from one or more real tables in the database. 

Views allow us to:
- Structure data in a way that users or classes of users find natural or intuitive. 
- Restrict access data in such a way that a user can see and (sometimes) modify exactly what they need and no more.
- Summarize data from various tables and use it to generate reports. 

To create a view:

CREATE VIEW view_name AS SELECT column_name(s) FROM table_name WHERE condition;

-The SELECT query can be as complex as you need it to be. It can contain multiple JOINS and other commands.

Let's create a view that displays each employee's FirstName and Salary:

CREATE VIEW List AS
SELECT FirstName, Salary
FROM  Employees;

Now, you can query the List view as you would query an actual table.

SELECT * FROM List;

A view always shows up-to-date data! The database engine uses the view's SQL statement to recreate the data each time a user queries a view.

Updating a View

You can update a view by using the following syntax:

CREATE OR REPLACE VIEW view_name AS
SELECT column_name(s)
FROM table_name
WHERE condition;

The example below updates our List view to select also the LastName:

CREATE OR REPLACE VIEW List AS
SELECT FirstName, LastName, Salary
FROM  Employees;

You can delete a view with the DROP VIEW command.

DROP VIEW List;

It is sometimes easier to drop a table and recreate it instead of using the ALTER TABLE statement to change the tableâ€™s definition.

=======================================

ZOO MANAGER EXAMPLE:

You manage a zoo. Each animal in the zoo comes from a different country. Here are the tables you have:
Animals, Countries. 

1) A new animal has come in, with the following details:
name - "Slim", type - "Giraffe", country_id - 1
Add him to the Animals table.

2) You want to make a complete list of the animals for the zooâ€™s visitors. Write a query to output a new table with each animal's name, type and country fields, sorted by countries.

ANS: 

INSERT INTO Animals (name, type, country_id)
VALUES ('Slim', 'Giraffe', '1');
SELECT Animals.name, animals.type, countries.country FROM Animals 
INNER JOIN Countries
ON  Animals.country_id = Countries.id
ORDER BY Countries.country;

https://www.sololearn.com/Certificate/CT-VLA2EPXW/png

============================================================================

Statements
The code below is a SQL statement. A statement is text that the database recognizes as a valid command. Statements always end in a semicolon ;.

CREATE TABLE table_name (
   column_1 data_type, 
   column_2 data_type, 
   column_3 data_type
);

Letâ€™s break down the components of a statement:

-CREATE TABLE is a clause. Clauses perform specific tasks in SQL. By convention, clauses are written in capital letters. Clauses can also be referred to as commands.

-table_name refers to the name of the table that the command is applied to.

-(column_1 data_type, column_2 data_type, column_3 data_type) is a parameter. A parameter is a list of columns, data types, or values that are passed to a clause as an argument. Here, the parameter is a list of column names and the associated data type.

-The structure of SQL statements vary. The number of lines used does not matter. A statement can be written all on one line, or split up across multiple lines if it makes it easier to read. In this course, you will become familiar with the structure of common statements.

CREATE statements allow us to create a new table in the database. You can use the CREATE statement anytime you want to create a new table from scratch. The statement below creates a new table named celebs.

CREATE TABLE celebs (
   id INTEGER, 
   name TEXT, 
   age INTEGER
);

1. CREATE TABLE is a clause that tells SQL you want to create a new table.
2. celebs is the name of the table.
3. (id INTEGER, name TEXT, age INTEGER) is a list of parameters defining each column, or attribute in the table and its data type:

- id is the first column in the table. It stores values of data type INTEGER
- name is the second column in the table. It stores values of data type TEXT
- age is the third column in the table. It stores values of data type INTEGER

The INSERT statement inserts a new row into a table.

We can use the INSERT statement when you want to add new records. The statement below enters a record for Justin Bieber into the celebs table.

INSERT INTO celebs (id, name, age) 
VALUES (1, 'Justin Bieber', 22);

INSERT INTO is a clause that adds the specified row or rows.

celebs is the table the row is added to.

(id, name, age) is a parameter identifying the columns that data will be inserted into.

VALUES is a clause that indicates the data being inserted.

(1, 'Justin Bieber', 22) is a parameter identifying the values being inserted.
   - 1: an integer that will be added to id column
   - 'Justin Bieber': text that will be added to name column
   - 22: an integer that will be added to age column

SELECT statements are used to fetch data from a database. In the statement below, SELECT returns all data in the name column of the celebs table.

SELECT name FROM celebs;

1. SELECT is a clause that indicates that the statement is a query. You will use SELECT every time you query data from a database.

2. name specifies the column to query data from.

3. FROM celebs specifies the name of the table to query data from. In this statement, data is queried from the celebs table.

You can also query data from all columns in a table with SELECT.

SELECT * FROM celebs;

* is a special wildcard character that we have been using. It allows you to select every column in a table without having to name each one individually. Here, the result set contains every column in the celebs table.

SELECT statements always return a new table called the result set.

The ALTER TABLE statement adds a new column to a table. You can use this command when you want to add columns to a table. The statement below adds a new column twitter_handle to the celebs table.

ALTER TABLE celebs 
ADD COLUMN twitter_handle TEXT;

1. ALTER TABLE is a clause that lets you make the specified changes.

2. celebs is the name of the table that is being changed.

3. ADD COLUMN is a clause that lets you add a new column to a table:

   - twitter_handle is the name of the new column being added
   - TEXT is the data type for the new column

4. NULL is a special value in SQL that represents missing or unknown data. Here, the rows that existed before the column was added have NULL (âˆ…) values for twitter_handle.

Alter
The ALTER TABLE statement adds a new column to a table. You can use this command when you want to add columns to a table. The statement below adds a new column twitter_handle to the celebs table.

ALTER TABLE celebs 
ADD COLUMN twitter_handle TEXT;

1. ALTER TABLE is a clause that lets you make the specified changes.

2. celebs is the name of the table that is being changed.

3. ADD COLUMN is a clause that lets you add a new column to a table:

-twitter_handle is the name of the new column being added
-TEXT is the data type for the new column

4. NULL is a special value in SQL that represents missing or unknown data. The rows that existed before the new column was added have NULL (âˆ…) values.

The UPDATE statement edits a row in a table. You can use the UPDATE statement when you want to change existing records. The statement below updates the record with an id value of 4 to have the twitter_handle @taylorswift13.

UPDATE celebs 
SET twitter_handle = '@taylorswift13' 
WHERE id = 4; 

1. UPDATE is a clause that edits a row in the table.
2. celebs is the name of the table.
3. SET is a clause that indicates the column to edit.

twitter_handle is the name of the column that is going to be updated
@taylorswift13 is the new value that is going to be inserted into the twitter_handle column.
4. WHERE is a clause that indicates which row(s) to update with the new column value. Here the row with a 4 in the id column is the row that will have the twitter_handle updated to @taylorswift13.

The DELETE FROM statement deletes one or more rows from a table. You can use the statement when you want to delete existing records. The statement below deletes all records in the celebs table with no twitter_handle:

DELETE FROM celebs 
WHERE twitter_handle IS NULL;

DELETE FROM is a clause that lets you delete rows from a table.
celebs is the name of the table we want to delete rows from.

WHERE is a clause that lets you select which rows you want to delete. Here we want to delete all of the rows where the twitter_handle column IS NULL.

IS NULL is a condition in SQL that returns true when the value is NULL and false otherwise.

Constraints

Constraints that add information about how a column can be used are invoked after specifying the data type for a column. They can be used to tell the database to reject inserted data that does not adhere to a certain restriction. The statement below sets constraints on the celebs table.

CREATE TABLE celebs (
   id INTEGER PRIMARY KEY, 
   name TEXT UNIQUE,
   date_of_birth TEXT NOT NULL,
   date_of_death TEXT DEFAULT 'Not Applicable'
);

1. PRIMARY KEY columns can be used to uniquely identify the row. Attempts to insert a row with an identical value to a row already in the table will result in a constraint violation which will not allow you to insert the new row.

2. UNIQUE columns have a different value for every row. This is similar to PRIMARY KEY except a table can have many different UNIQUE columns.

3. NOT NULL columns must have a value. Attempts to insert a row without a value for a NOT NULL column will result in a constraint violation and the new row will not be inserted.

4. DEFAULT columns take an additional argument that will be the assumed value for an inserted row if the new row does not specify a value for that column.

--------------------SUMMARY---------------------------

SQL is a programming language designed to manipulate and manage data stored in relational databases.

A relational database is a database that organizes information into one or more tables.
A table is a collection of data organized into rows and columns.
A statement is a string of characters that the database recognizes as a valid command.

CREATE TABLE creates a new table.
INSERT INTO adds a new row to a table.
SELECT queries data from a table.
ALTER TABLE changes an existing table.
UPDATE edits a row in a table.
DELETE FROM deletes rows from a table.

Constraints add information about how a column can be used.

------------------------------------------------------------------------------------------------

AS is a keyword in SQL that allows you to rename a column or table using an alias. The new name can be anything you want as long as you put it inside of single quotes. Here we renamed the name column as Titles.

Some important things to note:

-Although itâ€™s not always necessary, itâ€™s best practice to surround your aliases with single quotes.
-When using AS, the columns are not being renamed in the table. The aliases only appear in the result.

SELECT name AS 'Titles'
FROM movies;

Distinct
When we are examining data in a table, it can be helpful to know what distinct values exist in a particular column.

DISTINCT is used to return unique values in the output. It filters out all duplicate values in the specified column(s).

For instance,

SELECT tools 
FROM inventory;

might produce:

tools
Hammer
Nails
Nails
Nails

By adding DISTINCT before the column name,

SELECT DISTINCT tools 
FROM inventory;

the result would now be:

tools
Hammer
Nails

Filtering the results of a query is an important skill in SQL. It is easier to see the different possible genres in the movie table after the data has been filtered than to scan every row in the table.

We can restrict our query results using the WHERE clause in order to obtain only the information we want.

Following this format, the statement below filters the result set to only include top rated movies (IMDb ratings greater than 8):

SELECT *
FROM movies
WHERE imdb_rating > 8;

How does it work?

WHERE clause filters the result set to only include rows where the following condition is true.

imdb_rating > 8 is the condition. Here, only rows with a value greater than 8 in the imdb_rating column will be returned.

The > is an operator. Operators create a condition that can be evaluated as either true or false.

Comparison operators used with the WHERE clause are:

= equal to
!= not equal to
> greater than
< less than
>= greater than or equal to
<= less than or equal to

LIKE can be a useful operator when you want to compare similar values.

The movies table contains two films with similar titles, â€˜Se7enâ€™ and â€˜Sevenâ€™.

How could we select all movies that start with â€˜Seâ€™ and end with â€˜enâ€™ and have exactly one character in the middle?

SELECT * 
FROM movies
WHERE name LIKE 'Se_en';

LIKE is a special operator used with the WHERE clause to search for a specific pattern in a column.

name LIKE 'Se_en' is a condition evaluating the name column for a specific pattern.

Se_en represents a pattern with a wildcard character.

The _ means you can substitute any individual character here without breaking the pattern. The names Seven and Se7en both match this pattern.

The percentage sign % is another wildcard character that can be used with LIKE.

This statement below filters the result set to only include movies with names that begin with the letter â€˜Aâ€™:

SELECT * 
FROM movies
WHERE name LIKE 'A%';

% is a wildcard character that matches zero or more missing letters in the pattern. For example:

-A% matches all movies with names that begin with letter â€˜Aâ€™
-%a matches all movies that end with â€˜aâ€™

We can also use % both before and after a pattern:

SELECT * 
FROM movies 
WHERE name LIKE '%man%';

Here, any movie that contains the word â€˜manâ€™ in its name will be returned in the result.

LIKE is not case sensitive. â€˜Batmanâ€™ and â€˜Man of Steelâ€™ will both appear in the result of the query above.

Is Null

By this point of the lesson, you might have noticed that there are a few missing values in the movies table. More often than not, the data you encounter will have missing values.

Unknown values are indicated by NULL.

It is not possible to test for NULL values with comparison operators, such as = and !=.

Instead, we will have to use these operators:

IS NULL
IS NOT NULL

To filter for all movies with an IMDb rating:

SELECT name
FROM movies 
WHERE imdb_rating IS NOT NULL;

The BETWEEN operator is used in a WHERE clause to filter the result set within a certain range. It accepts two values that are either numbers, text or dates.

For example, this statement filters the result set to only include movies with years from 1990 up to, and including 1999.

SELECT *
FROM movies
WHERE year BETWEEN 1990 AND 1999;

When the values are text, BETWEEN filters the result set for within the alphabetical range.

In this statement, BETWEEN filters the result set to only include movies with names that begin with the letter â€˜Aâ€™ up to, but not including ones that begin with â€˜Jâ€™.

SELECT *
FROM movies
WHERE name BETWEEN 'A' AND 'J';

However, if a movie has a name of simply â€˜Jâ€™, it would actually match. This is because BETWEEN goes up to the second value â€” up to â€˜Jâ€™. So the movie named â€˜Jâ€™ would be included in the result set but not â€˜Jawsâ€™.

Sometimes we want to combine multiple conditions in a WHERE clause to make the result set more specific and useful.

One way of doing this is to use the AND operator. Here, we use the AND operator to only return 90â€™s romance movies.

SELECT * 
FROM movies
WHERE year BETWEEN 1990 AND 1999
AND genre = 'romance';

year BETWEEN 1990 AND 1999 is the 1st condition.

genre = 'romance' is the 2nd condition.

AND combines the two conditions.

With AND, both conditions must be true for the row to be included in the result.

Similar to AND, the OR operator can also be used to combine multiple conditions in WHERE, but there is a fundamental difference:

AND operator displays a row if all the conditions are true.
OR operator displays a row if any condition is true.
Suppose we want to check out a new movie or something action-packed:

SELECT *
FROM movies
WHERE year > 2014
   OR genre = 'action';
year > 2014 is the 1st condition.

genre = 'action' is the 2nd condition.

OR combines the two conditions. With OR, if any of the conditions are true, then the row is added to the result.

We can sort the results using ORDER BY, either alphabetically or numerically. Sorting the results often makes the data more useful and easier to analyze.

For example, if we want to sort everything by the movieâ€™s title from A through Z:

SELECT *
FROM movies
ORDER BY name;
ORDER BY is a clause that indicates you want to sort the result set by a particular column.

name is the specified column.

Sometimes we want to sort things in a decreasing order. For example, if we want to select all of the well-received movies, sorted from highest to lowest by their year:

SELECT *
FROM movies
WHERE imdb_rating > 8
ORDER BY year DESC;
DESC is a keyword used in ORDER BY to sort the results in descending order (high to low or Z-A).

ASC is a keyword used in ORDER BY to sort the results in ascending order (low to high or A-Z).

The column that we ORDER BY doesnâ€™t even have to be one of the columns that weâ€™re displaying.

Note: ORDER BY always goes after WHERE (if WHERE is present).

Weâ€™ve been working with a fairly small table (fewer than 250 rows), but most SQL tables contain hundreds of thousands of records. In those situations, it becomes important to cap the number of rows in the result.

For instance, imagine that we just want to see a few examples of records.

SELECT *
FROM movies
LIMIT 10;

LIMIT is a clause that lets you specify the maximum number of rows the result set will have. This saves space on our screen and makes our queries run faster.

Here, we specify that the result set canâ€™t have more than 10 rows.

LIMIT always goes at the very end of the query. Also, it is not supported in all SQL databases.

A CASE statement allows us to create different outputs (usually in the SELECT statement). It is SQLâ€™s way of handling if-then logic.

Suppose we want to condense the ratings in movies to three levels:

-If the rating is above 8, then it is Fantastic.
-If the rating is above 6, then it is Poorly Received.
-Else, Avoid at All Costs.

SELECT name,
 CASE
  WHEN imdb_rating > 8 THEN 'Fantastic'
  WHEN imdb_rating > 6 THEN 'Poorly Received'
  ELSE 'Avoid at All Costs'
 END
FROM movies;

-Each WHEN tests a condition and the following THEN gives us the string if the condition is true.

-The ELSE gives us the string if all the above conditions are false.

-The CASE statement must end with END.

In the result, you have to scroll right because the column name is very long. To shorten it, we can rename the column to â€˜Reviewâ€™ using AS:

SELECT name,
 CASE
  WHEN imdb_rating > 8 THEN 'Fantastic'
  WHEN imdb_rating > 6 THEN 'Poorly Received'
  ELSE 'Avoid at All Costs'
 END AS 'Review'
FROM movies;

Letâ€™s summarize:

SELECT is the clause we use every time we want to query information from a database.
AS renames a column or table.

DISTINCT return unique values.

WHERE is a popular command that lets you filter the results of the query based on conditions that you specify.

LIKE and BETWEEN are special operators.

AND and OR combines multiple conditions.

ORDER BY sorts the result.

LIMIT specifies the maximum number of rows that the query will return.

CASE creates different outputs.

Calculations performed on multiple rows of a table are called aggregates.

In this lesson, we have given you a table named fake_apps which is made up of fake mobile applications data.

Here is a quick preview of some important aggregates that we will cover in the next five exercises:

COUNT(): count the number of rows
SUM(): the sum of the values in a column
MAX()/MIN(): the largest/smallest value
AVG(): the average of the values in a column
ROUND(): round the values in the column

----------------------------------------------------------

Count

The fastest way to calculate how many rows are in a table is to use the COUNT() function.

COUNT() is a function that takes the name of a column as an argument and counts the number of non-empty values in that column.

SELECT COUNT(*)
FROM table_name;
Here, we want to count every row, so we pass * as an argument inside the parenthesis.

-----------------------------------------------------------------------------------------------------

Sum

SQL makes it easy to add all values in a particular column using SUM().

SUM() is a function that takes the name of a column as an argument and returns the sum of all the values in that column.

What is the total number of downloads for all of the apps combined?

SELECT SUM(downloads)
FROM fake_apps;

This adds all values in the downloads column.

-----------------------------------------------------------------------------------------------------

Max / Min

The MAX() and MIN() functions return the highest and lowest values in a column, respectively.

How many downloads does the most popular app have?

SELECT MAX(downloads)
FROM fake_apps;

The most popular app has 31,090 downloads!

MAX() takes the name of a column as an argument and returns the largest value in that column. Here, we returned the largest value in the downloads column.

MIN() works the same way but it does the exact opposite; it returns the smallest value.

-------------------------------------------------------------------------------------------------

Average

SQL uses the AVG() function to quickly calculate the average value of a particular column.

The statement below returns the average number of downloads for an app in our database:

SELECT AVG(downloads)
FROM fake_apps;

The AVG() function works by taking a column name as an argument and returns the average value for that column.

-----------------------------------------------------------------------------------------------------------

Round

By default, SQL tries to be as precise as possible without rounding. We can make the result table easier to read using the ROUND() function.

ROUND() function takes two arguments inside the parenthesis:

-a column name
-an integer

It rounds the values in the column to the number of decimal places specified by the integer.

SELECT ROUND(price, 0)
FROM fake_apps;

Here, we pass the column price and integer 0 as arguments. SQL rounds the values in the column to 0 decimal places in the output

In the last exercise, we were able to get the average price of an app ($2.02365) using this query:

SELECT AVG(price)
FROM fake_apps;
Now, letâ€™s edit this query so that it rounds this result to 2 decimal places.

ANS:

SELECT  
ROUND(AVG(price), 2) // one of your two arguments can be a nested function
FROM fake_apps;

------------------------------------------------------------------------------------------------

AGGREGATE FUNCTIONS

Group By I

Oftentimes, we will want to calculate an aggregate for data with certain characteristics.

For instance, we might want to know the mean IMDb ratings for all movies each year. We could calculate each number by a series of queries with different WHERE statements, like so:

SELECT AVG(imdb_rating)
FROM movies
WHERE year = 1999;
 
SELECT AVG(imdb_rating)
FROM movies
WHERE year = 2000;
 
SELECT AVG(imdb_rating)
FROM movies
WHERE year = 2001;
and so on.

Luckily, thereâ€™s a better way!

We can use GROUP BY to do this in a single step:

SELECT year,
   AVG(imdb_rating)
FROM movies
GROUP BY year
ORDER BY year;

GROUP BY is a clause in SQL that is used with aggregate functions. It is used in collaboration with the SELECT statement to arrange identical data into groups.

The GROUP BY statement comes after any WHERE statements, but before ORDER BY or LIMIT.

Group By II - Sometimes, we want to GROUP BY a calculation done on a column.

For instance, we might want to know how many movies have IMDb ratings that round to 1, 2, 3, 4, 5. We could do this using the following syntax:

SELECT ROUND(imdb_rating),
   COUNT(name)
FROM movies
GROUP BY ROUND(imdb_rating)
ORDER BY ROUND(imdb_rating);

However, this query may be time-consuming to write and more prone to error.

SQL lets us use column reference(s) in our GROUP BY that will make our lives easier.

1 is the first column selected
2 is the second column selected
3 is the third column selected
and so on.

The following query is equivalent to the one above:

SELECT ROUND(imdb_rating),
   COUNT(name)
FROM movies
GROUP BY 1
ORDER BY 1;

Here, the 1 refers to the first column in our SELECT statement, ROUND(imdb_rating).